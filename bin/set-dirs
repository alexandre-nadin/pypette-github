#!/usr/bin/env bash
set -euf -o pipefail
mkdir -p ~/dev/ctgb
cd ~/dev/ctgb

mkdir -p "${CTGB__DIR_PROJECTS:-./projects}"
mkdir -p ./runs

# Mount Illumina directory
CLUSTER_PATH="./cluster"
function mountClusterPoint() {
  mkdir -p "$CLUSTER_PATH"
  mountpoint -q "$CLUSTER_PATH" \
   || sshfs -o nonempty anadin@172.21.151.42:${1:-/} "$CLUSTER_PATH"
}

mountClusterPoint "/"
